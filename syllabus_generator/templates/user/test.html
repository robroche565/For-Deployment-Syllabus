{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Form</title>
    <!-- Include Bootstrap CSS and jQuery -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container mt-4">
        <div class="col-lg-12">
            <div class="row">
                <div class="mb-3 col-lg-12">
                    <label for="name_of_syllabus" class="form-label">Name of Syllabus</label>
                    <input type="text" class="form-control" id="name_of_syllabus" name="name_of_syllabus" placeholder="Insert name of syllabus here">
                </div>
            </div>
            <div class="form-group">
                <label>Type of Information Syllabus Source</label>
                <br>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="type_of_info_syllabus_source" id="autoGenerated" value="Auto" checked>
                    <label class="form-check-label" for="autoGenerated">Auto-Generated</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="type_of_info_syllabus_source" id="specificSources" value="Specific">
                    <label class="form-check-label" for="specificSources">Specific Sources</label>
                </div>
            </div>

            <div id="source-input-container" style="display: none;">
                <!-- Initial source input field -->
                <div class="input-group mb-2">
                    <input type="text" class="form-control" name="source[]" id="specific_sources_name" placeholder="Enter Source Here">
                        <button class="btn btn-danger remove-source" type="button"><i class='bx bx-minus-circle'></i></button>
                </div>
            </div>

            <button type="button" class="btn btn-success btn-sm mt-2" id="add-source" style="display: none;">Add Source</button>
            
            <div><label class="me-3">Course Requirements</label><button class="btn btn-success btn-sm add-course-requirement" type="button"><i class='bx bx-plus-circle'></i></button></div>
            <div class="col-lg-12 mt-1 course-requirements">
                <div class="input-group">
                    <input type="text" class="form-control course-requirement" placeholder="" name="Course_Requirements_text">
                    <button class="btn btn-danger remove-course-requirement" type="button"><i class='bx bx-minus-circle'></i></button>
                </div>
            </div>
        

            <div class="pb-1"><label class="me-3">Prepared By:</label><button class="btn btn-success btn-sm add-prepared-by" type="button"><i class='bx bx-plus-circle'></i></button></div>
            <div class="prepared-by">
                <div class="input-group">
                    <span class="input-group-text">Name and Position</span>
                    <input type="text" aria-label="name_of_instructor" class="form-control name-of-instructor" name="name_of_instructor">
                    <input type="text" aria-label="pos_of_instructor" class="form-control pos-of-instructor" name="pos_of_instructor">
                    <button class="btn btn-danger remove-prepared-by" type="button"><i class='bx bx-minus-circle'></i></button>
                </div>
            </div>
            
        </div>
        <div class="row">
            <h5>Mid-Term</h5>
            <div class="col-lg-7">
                <label class="form-label">Description and Percent</label>
                <div class="mid-term-inputs">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Attendance" name="description[]">
                        <input type="number" class="form-control" placeholder="Percentage" name="percentage[]">
                        <button class="btn btn-danger remove-mid-term" type="button"><i class='bx bx-minus-circle'></i></button>
                    </div>
                </div>
                <div class="mt-2">
                    <button class="btn btn-success btn-sm add-mid-term" type="button">Add</button>
                </div>
            </div>
            <div class="mb-3 col-lg-5">
                <label for="Mid_Term_Grade" class="form-label">Mid-Term Grade</label>
                <input type="number" class="form-control" id="Mid_Term_Grade" name="Mid_Term_Grade" placeholder="percentage">
            </div>
        </div>
        <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Launch demo modal
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" >
    <div class="modal-dialog" >
      <div class="modal-content" style="background-color: #202123">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Modal title</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>
        
    </div>

    <script>
        $(document).ready(function() {
            var maxMidTermInputs = 5; // Maximum number of Mid-Term inputs allowed

            // Function to add a new Mid-Term input field
            function addMidTermInput() {
                if ($(".mid-term-inputs .input-group").length < maxMidTermInputs) {
                    var $newMidTermInput = $(".mid-term-inputs .input-group:first").clone();
                    $newMidTermInput.find('input').val(''); // Clear input values in the cloned field
                    $(".mid-term-inputs").append($newMidTermInput);
                } else {
                    alert('You can only add up to 5 Mid-Term entries.');
                }
            }

            // Event listener for "Add Mid-Term" button
            $(document).on("click", ".add-mid-term", function () {
                addMidTermInput();
            });

            // Event delegation for "Remove" button for Mid-Term inputs
            $(document).on("click", ".remove-mid-term", function () {
                if ($(".mid-term-inputs .input-group").length > 1) {
                    $(this).closest(".input-group").remove();
                }
            });

            var maxSources = 5;

            // Function to toggle the source input container and "Add Source" button
            function toggleSourceInputContainer() {
                var radioValue = $("input[name='type_of_info_syllabus_source']:checked").val();
                if (radioValue === "Specific") {
                    $("#source-input-container").show();
                    $("#add-source").show();
                } else {
                    $("#source-input-container").hide();
                    $("#add-source").hide();
                }
            }

            // Initialize the container's visibility based on the initial radio button state
            toggleSourceInputContainer();

            // Event listener for radio button change
            $("input[name='type_of_info_syllabus_source']").change(function() {
                toggleSourceInputContainer();
            });

            // Function to add a new source input field
            function addSource() {
                if ($("#source-input-container .input-group").length < maxSources) {
                    var $newSource = $("#source-input-container .input-group:first").clone();
                    $newSource.find('input').val(''); // Clear input value in the cloned field
                    $newSource.find('input').removeAttr('id'); // Remove the 'id' attribute
                    $("#source-input-container").append($newSource);
                } else {
                    alert('You can only add up to 5 sources.');
                }
            }

            // Event listener for "Add Source" button
            $("#add-source").click(function() {
                addSource();
            });

            // Event delegation for "Remove" button
            $("#source-input-container").on("click", ".remove-source", function() {
                if ($("#source-input-container .input-group").length > 1) {
                    $(this).closest(".input-group").remove();
                }
            });

             // Function to add a new course requirement input field
            function addCourseRequirement() {
                var $newCourseRequirement = $(".course-requirements .input-group:first").clone();
                $newCourseRequirement.find('input').val(''); // Clear input value in the cloned field
                $(".course-requirements").append($newCourseRequirement);
            }

            // Event listener for "Add Course Requirement" button
            $(".add-course-requirement").click(function() {
                addCourseRequirement();
            });

            // Event delegation for "Remove" button for course requirements
            $(".course-requirements").on("click", ".remove-course-requirement", function() {
                if ($(".course-requirements .input-group").length > 1) {
                    $(this).closest(".input-group").remove();
                }
            });

            var maxPreparedBy = 3;

            // Function to add a new prepared by input field
            function addPreparedBy() {
                if ($(".prepared-by .input-group").length < maxPreparedBy) {
                    var $newPreparedBy = $(".prepared-by .input-group:first").clone();
                    $newPreparedBy.find('input').val(''); // Clear input value in the cloned field
                    $(".prepared-by").append($newPreparedBy);
                } else {
                    alert('You can only add up to 3 Prepared By entries.');
                }
            }
        
            // Event listener for "Add Prepared By" button
            $(".add-prepared-by").click(function() {
                addPreparedBy();
            });
        
            // Event delegation for "Remove" button for prepared by
            $(".prepared-by").on("click", ".remove-prepared-by", function() {
                if ($(".prepared-by .input-group").length > 1) {
                    $(this).closest(".input-group").remove();
                }
            });

            
        });
    </script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
